#include <windows.h>
#include <GL/glut.h>
#include <math.h>
#include <iostream>

using namespace std;

// User input values
float tx, ty;      // translation
float sx, sy;      // scaling
float angle;       // rotation angle in degrees
float shx, shy;    // shear factors

void drawText(float x, float y, const char* text) {
    glRasterPos2f(x, y);
    while (*text) {
        glutBitmapCharacter(GLUT_BITMAP_HELVETICA_12, *text);
        text++;
    }
}

void display() {
    glClear(GL_COLOR_BUFFER_BIT);
    glLineWidth(2.0f);

    int x1 = 1, y1 = 1;
    int x2 = 4, y2 = 1;
    int x3 = 4, y3 = 4;
    int x4 = 1, y4 = 4;

    // ---------------------------------------------
    // ORIGINAL SQUARE (yellow)
    // ---------------------------------------------
    glColor3f(1.0f, 0.8f, 0.0f);
    glBegin(GL_LINE_LOOP);
        glVertex2f(x1, y1);
        glVertex2f(x2, y2);
        glVertex2f(x3, y3);
        glVertex2f(x4, y4);
    glEnd();
    glColor3f(1.0f, 1.0f, 1.0f);
    drawText(x1, y4 + 1.0f, "Original");

    // ---------------------------------------------
    // TRANSLATION
    // ---------------------------------------------
    glColor3f(0.0f, 1.0f, 0.0f); // green
    glBegin(GL_LINE_LOOP);
        glVertex2f(x1 + tx, y1 + ty);
        glVertex2f(x2 + tx, y2 + ty);
        glVertex2f(x3 + tx, y3 + ty);
        glVertex2f(x4 + tx, y4 + ty);
    glEnd();
    glColor3f(0.0f, 1.0f, 0.0f);
    drawText(x1 + tx, y4 + ty + 1.0f, "Translation");

    // ---------------------------------------------
    // SCALING
    // ---------------------------------------------
    glColor3f(0.0f, 0.5f, 1.0f); // blue
    glBegin(GL_LINE_LOOP);
        glVertex2f(x1 * sx, y1 * sy);
        glVertex2f(x2 * sx, y2 * sy);
        glVertex2f(x3 * sx, y3 * sy);
        glVertex2f(x4 * sx, y4 * sy);
    glEnd();
    glColor3f(0.0f, 0.5f, 1.0f);
    drawText(x1 * sx, y4 * sy + 1.0f, "Scaling");

    // ---------------------------------------------
    // ROTATION ABOUT ORIGIN
    // ---------------------------------------------
    float rad = angle * 3.14159265f / 180.0f;
    float c = cos(rad);
    float s = sin(rad);

    // rotated vertices
    float rx1 = x1 * c - y1 * s;
    float ry1 = x1 * s + y1 * c;
    float rx2 = x2 * c - y2 * s;
    float ry2 = x2 * s + y2 * c;
    float rx3 = x3 * c - y3 * s;
    float ry3 = x3 * s + y3 * c;
    float rx4 = x4 * c - y4 * s;
    float ry4 = x4 * s + y4 * c;

    glColor3f(0.0f, 1.0f, 1.0f); // cyan
    glBegin(GL_LINE_LOOP);
        glVertex2f(rx1, ry1);
        glVertex2f(rx2, ry2);
        glVertex2f(rx3, ry3);
        glVertex2f(rx4, ry4);
    glEnd();
    glColor3f(0.0f, 1.0f, 1.0f);
    drawText(rx1, ry4 + 1.0f, "Rotation");

    // ---------------------------------------------
    // REFLECTION ABOUT X AXIS
    // ---------------------------------------------
    glColor3f(1.0f, 0.0f, 0.0f); // red
    glBegin(GL_LINE_LOOP);
        glVertex2f(x1, -y1);
        glVertex2f(x2, -y2);
        glVertex2f(x3, -y3);
        glVertex2f(x4, -y4);
    glEnd();
    glColor3f(1.0f, 0.0f, 0.0f);
    drawText(x1, -y4 - 2.0f, "Reflect X axis");

    // ---------------------------------------------
    // REFLECTION ABOUT Y AXIS
    // ---------------------------------------------
    glColor3f(1.0f, 0.0f, 1.0f); // magenta
    glBegin(GL_LINE_LOOP);
        glVertex2f(-x1, y1);
        glVertex2f(-x2, y2);
        glVertex2f(-x3, y3);
        glVertex2f(-x4, y4);
    glEnd();
    glColor3f(1.0f, 0.0f, 1.0f);
    drawText(-x3 - 4.0f, y4 + 1.0f, "Reflect Y axis");

    // ---------------------------------------------
    // REFLECTION ABOUT ORIGIN
    // ---------------------------------------------
    glColor3f(0.5f, 0.0f, 0.5f); // purple
    glBegin(GL_LINE_LOOP);
        glVertex2f(-x1, -y1);
        glVertex2f(-x2, -y2);
        glVertex2f(-x3, -y3);
        glVertex2f(-x4, -y4);
    glEnd();
    glColor3f(0.5f, 0.0f, 0.5f);
    drawText(-x3 - 4.0f, -y4 - 2.0f, "Reflect origin");

    // ---------------------------------------------
    // SHEAR IN X
    // ---------------------------------------------
    glColor3f(0.5f, 0.5f, 0.0f); // olive
    glBegin(GL_LINE_LOOP);
        glVertex2f(x1 + shx * y1, y1);
        glVertex2f(x2 + shx * y2, y2);
        glVertex2f(x3 + shx * y3, y3);
        glVertex2f(x4 + shx * y4, y4);
    glEnd();
    glColor3f(0.5f, 0.5f, 0.0f);
    drawText(x1 + shx * y4, y4 + 3.0f, "Shear X");

    // ---------------------------------------------
    // SHEAR IN Y
    // ---------------------------------------------
    glColor3f(0.0f, 0.5f, 0.5f); // teal
    glBegin(GL_LINE_LOOP);
        glVertex2f(x1, y1 + shy * x1);
        glVertex2f(x2, y2 + shy * x2);
        glVertex2f(x3, y3 + shy * x3);
        glVertex2f(x4, y4 + shy * x4);
    glEnd();
    glColor3f(0.0f, 0.5f, 0.5f);
    drawText(x1, y4 + shy * x4 + 3.0f, "Shear Y");

    glFlush();
}

void init() {
    glClearColor(0, 0, 0, 1);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(-20, 20, -20, 20);
}

int main(int argc, char** argv) {
    cout << "Enter translation tx ty: ";
    cin >> tx >> ty;

    cout << "Enter scaling sx sy: ";
    cin >> sx >> sy;

    cout << "Enter rotation angle in degrees: ";
    cin >> angle;

    cout << "Enter shear factors shx shy: ";
    cin >> shx >> shy;

    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize(600, 600);
    glutCreateWindow("Square Transformations");
    init();
    glutDisplayFunc(display);
    glutMainLoop();
    return 0;
}
